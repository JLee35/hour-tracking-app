<script>
    // Contains all event listeners and helper functions for employee info page.
    
    // After the user specifies the week ending date,
    // update all table dates accordingly.
    function updateDates() {
        var weekEnding = $("#weekEnding").val();

        if (weekEnding != "") {
            var endingDateInMilliseconds = new Date(Date.parse(weekEnding)).getTime();
            // There are 86400000 ms in a day, subtracting that
            // from current date object gives us previous day.

            setDateAndMonth(".sundayDate", endingDateInMilliseconds);
            setDateAndMonth(".saturdayDate", endingDateInMilliseconds -= 86400000);
            setDateAndMonth(".fridayDate", endingDateInMilliseconds -= 86400000);
            setDateAndMonth(".thursdayDate", endingDateInMilliseconds -= 86400000);
            setDateAndMonth(".wednesdayDate", endingDateInMilliseconds -= 86400000);
            setDateAndMonth(".tuesdayDate", endingDateInMilliseconds -= 86400000);
            setDateAndMonth(".mondayDate", endingDateInMilliseconds -= 86400000);
        }
    }

    // Set current date and month based on milliseconds since epoch.
    function setDateAndMonth(dayElement, dateInMilliseconds) {
        var date = new Date(dateInMilliseconds)

        // Months are zero index based, we must add one
        // to get correct value.
        var month = date.getMonth() + 1;
        var day = date.getDate();

        var newDate = month + "/" + day;

        $(dayElement).text(newDate);
    }

    $('#weekEnding').datepicker({
        daysOfWeekDisabled: "1,2,3,4,5,6"
    });

    $("#beginLoggingBtn").click(function() {
        updateDates();

        $("#employeeInfoPage").css('display', 'none');
        $("#generalInfoPage").css('display', 'block');
        if(!$("#progressBar2").hasClass("bg-success"))
        {
            $("#progressBar1").removeClass("bg-warning");
            $("#progressBar1").addClass("bg-success");
            $("#progressBar2").removeClass("bg-danger");
            $("#progressBar2").addClass("bg-warning");
        }
        $("#progressBar1").removeClass("progress-highlight");
        $("#progressBar2").addClass("progress-highlight");
        currentPage = "generalInfoPage";
        return;
    });

    $("#employeeInfoBackBtn").click(function () {
        $("#employeeInfoPage").css('display', 'none');
        $("#introductionPage").css('display', 'block');

        $("#progressBar1").removeClass("progress-highlight");
        currentPage = "introductionPage";
        return;
    });
</script>